<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HQC: a Public-Key Encryption scheme: src/gf2x_avx2.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">HQC: a Public-Key Encryption scheme
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">gf2x_avx2.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>AVX2 implementation of multiplication of two polynomials.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="gf2x__avx2_8h_source.html">gf2x_avx2.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaligned__block.html">aligned_block</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">a structure to allocate aligned space in memory  <a href="structaligned__block.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aaea9e4f6e0b2cfab33eb12ca0f334756" id="r_aaea9e4f6e0b2cfab33eb12ca0f334756"><td class="memItemLeft" align="right" valign="top"><a id="aaea9e4f6e0b2cfab33eb12ca0f334756" name="aaea9e4f6e0b2cfab33eb12ca0f334756"></a>
typedef struct aligned_block&#160;</td><td class="memItemRight" valign="bottom"><b>aligned_block</b></td></tr>
<tr class="separator:aaea9e4f6e0b2cfab33eb12ca0f334756"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac688e11f724147f0a9d7139bf6a6ab50" id="r_ac688e11f724147f0a9d7139bf6a6ab50"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structaligned__block.html">aligned_block</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac688e11f724147f0a9d7139bf6a6ab50">aligned_malloc</a> (size_t alignment, size_t size)</td></tr>
<tr class="memdesc:ac688e11f724147f0a9d7139bf6a6ab50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate aligned memory.  <br /></td></tr>
<tr class="separator:ac688e11f724147f0a9d7139bf6a6ab50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fc1e8ecb4dee4bec732b54c46ac833e" id="r_a9fc1e8ecb4dee4bec732b54c46ac833e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9fc1e8ecb4dee4bec732b54c46ac833e">shiftXor</a> (v8uint32 dest[], v8uint32 source[], unsigned int length, unsigned int distance)</td></tr>
<tr class="memdesc:a9fc1e8ecb4dee4bec732b54c46ac833e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes dest ^= source&gt;&gt;distance,.  <br /></td></tr>
<tr class="separator:a9fc1e8ecb4dee4bec732b54c46ac833e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac29dffd18da7ee75d630ab4e4cce6b7" id="r_aac29dffd18da7ee75d630ab4e4cce6b7"><td class="memItemLeft" align="right" valign="top">static v8uint32 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aac29dffd18da7ee75d630ab4e4cce6b7">make_double_vector</a> (const uint8_t *v, <a class="el" href="structaligned__block.html">aligned_block</a> *a)</td></tr>
<tr class="memdesc:aac29dffd18da7ee75d630ab4e4cce6b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct vector concatenated with itself in aligned memory.  <br /></td></tr>
<tr class="separator:aac29dffd18da7ee75d630ab4e4cce6b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad21485660ecff48650d1893d4e40a857" id="r_ad21485660ecff48650d1893d4e40a857"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad21485660ecff48650d1893d4e40a857">vect_sparse_from_bytes</a> (uint32_t *o, const uint8_t *a)</td></tr>
<tr class="memdesc:ad21485660ecff48650d1893d4e40a857"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the support of the spare vector.  <br /></td></tr>
<tr class="separator:ad21485660ecff48650d1893d4e40a857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61737cb134837b98b1babd017dcc54d4" id="r_a61737cb134837b98b1babd017dcc54d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a61737cb134837b98b1babd017dcc54d4">sparse_dense_mul</a> (uint8_t *o, const uint8_t *v1, const uint8_t *v2, const uint32_t weight)</td></tr>
<tr class="memdesc:a61737cb134837b98b1babd017dcc54d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Multiply two vectors.  <br /></td></tr>
<tr class="separator:a61737cb134837b98b1babd017dcc54d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>AVX2 implementation of multiplication of two polynomials. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ac688e11f724147f0a9d7139bf6a6ab50" name="ac688e11f724147f0a9d7139bf6a6ab50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac688e11f724147f0a9d7139bf6a6ab50">&#9670;&#160;</a></span>aligned_malloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static inline <a class="el" href="structaligned__block.html">aligned_block</a> * aligned_malloc </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>alignment</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>size</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate aligned memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">alignment</td><td>a value that is the number of bytes by block </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>a value that is the total number of needed bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to a structure </dd></dl>

</div>
</div>
<a id="aac29dffd18da7ee75d630ab4e4cce6b7" name="aac29dffd18da7ee75d630ab4e4cce6b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac29dffd18da7ee75d630ab4e4cce6b7">&#9670;&#160;</a></span>make_double_vector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static inline v8uint32 * make_double_vector </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>v</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structaligned__block.html">aligned_block</a> *</td>          <td class="paramname"><span class="paramname"><em>a</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct vector concatenated with itself in aligned memory. </p>
<p>First we have to make two concatenated copies of the vector in picture form, where we take: PARAM_N = 13 BYTESPERVECTOR = 2 VEC_N_ARRAY_SIZE_VEC = 2 VECTORSIZE = 8 VEC_N_ARRAY_SIZE_INT = 4 we have a number of 13 bits, written little-endian in words: </p><pre>
v2:        aaaa bbbb cccc d...
we want to concatenate with itself to get:
           aaaa bbbb cccc daaa abbb bccc cd..
let's say a vector is two of these mini-ints, so we see this as:
           aaaa,bbbb cccc,d...
first we make room for twice the number of vectors, plus one:
 0000,0000 0000,0000 0000,0000 0000,0000 0000,0000
copy the data, skipping one initial vector:
 0000,0000 aaaa,bbbb cccc,d... 0000,0000 0000,0000
 now we use shiftXor with a distance of 2*8-13=3, and a length of 3:
source:   ^   dest: ^ 
0000,0000 aaaa,bbbb cccc,d... 0000,0000 0000,0000
    ^ ^^^^ ^^^       vvvv vvvv      xor action 1
 0000,0000 aaaa,bbbb cccc,daaa 0000,0000 0000,0000
 xor action 2:^ ^^^^ ^^^       vvvv vvvv
 0000,0000 aaaa,bbbb cccc,daaa abbb,bccc 0000,0000
 xor action 3:          ^ ^^^^ ^^^       vvvv vvvv
 0000,0000 aaaa,bbbb cccc,daaa abbb,bccc cdaa,abbb
 (note the extra wraparound).
 The output is at result+1
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">v</td><td>Pointer to the vector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">a</td><td>Pointer to the aligned allocated memory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the double vector </dd></dl>

</div>
</div>
<a id="a9fc1e8ecb4dee4bec732b54c46ac833e" name="a9fc1e8ecb4dee4bec732b54c46ac833e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fc1e8ecb4dee4bec732b54c46ac833e">&#9670;&#160;</a></span>shiftXor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shiftXor </td>
          <td>(</td>
          <td class="paramtype">v8uint32</td>          <td class="paramname"><span class="paramname"><em>dest</em>[], </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">v8uint32</td>          <td class="paramname"><span class="paramname"><em>source</em>[], </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>length</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>distance</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes dest ^= source&gt;&gt;distance,. </p>
<p>Source and dest are bignumbers stored little endian in memory and read as vectors Routine is optimized to efficiently use vector registers we assume source is copied twice, you can use it to rotate in picture form (with four bit words): say distance = 11 and, v2 has length 14 bits v2: aaaa bbbb cccc dd.. we made a double vector as make_double_vector to do that, shiftxor will read three vectors and write: </p><pre>
(0000,0000)aaaa,bbbb cccc,ddaa aabb,bbcc ccdd,aaaa bbbb,cccc
                        \ |||\ |||\ |||\ |
v2:                     aaaa bbbb cccc dd..
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">dest</td><td>Array that is the result </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">source</td><td>Array that is the source of data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Integer that is size of the source </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">distance</td><td>Integer that is the amount of shits to do </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a61737cb134837b98b1babd017dcc54d4" name="a61737cb134837b98b1babd017dcc54d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61737cb134837b98b1babd017dcc54d4">&#9670;&#160;</a></span>sparse_dense_mul()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sparse_dense_mul </td>
          <td>(</td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>o</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>v1</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>v2</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t</td>          <td class="paramname"><span class="paramname"><em>weight</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Multiply two vectors. </p>
<p>This functions multiplies a sparse vector <b>v1</b> (of Hamming weight equal to <b>weight</b>) and a dense vector <b>v2</b>. The multiplication is done using the matrix-vector form of the multiplication of two polynomials modulo \( X^n - 1\). where the matrix is generated using the dense vector.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">o</td><td>Pointer to the result </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v1</td><td>Pointer to the first vector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v2</td><td>Pointer to the first vector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">weight</td><td>Integer that is the weigt of the sparse vector </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad21485660ecff48650d1893d4e40a857" name="ad21485660ecff48650d1893d4e40a857"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad21485660ecff48650d1893d4e40a857">&#9670;&#160;</a></span>vect_sparse_from_bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vect_sparse_from_bytes </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>o</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>a</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the support of the spare vector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">o</td><td>Pointer to an array that is the support </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">a</td><td>Pointer to the vector </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
